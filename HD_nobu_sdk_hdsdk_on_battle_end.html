<h2><i class="fa fa-pencil-square-o fa-fw"></i>On_戦争終了時</h2>

<ul class="checklist">
    <li>
    <h3>On_戦争終了時</h3>
    <p>戦争が終了したタイミングで呼ばれるイベントハンドラとなります。<br>
  戦争終了とは、捕虜処遇なども含めて、全てが終了したタイミングとなります。<br>

    </p>
  <p>
このイベントハンドラと対を成す役割となるのが、「On_戦争開始時」のイベントハンドラとなります。
  </p>
    </li>
    <li>
    <h3>注意点</h3>
    <p>「PC勢力かNPC勢力かは関係ありません、また、戦争を見る設定か見ない設定かも関係ありません。<br>
  全ての戦争において、戦争が終了したタイミングでこのイベントハンドラは呼ばれます。<br>
</p>

    </li><li>
    <h3>使い処</h3>
    <p>戦争が始まる前に、値を保持しておき、戦争が終わったら元へと戻す、<br>
  といったような目的で利用することが可能です。<br>
    </p>
    </li><li>
    <h3>使用例①</h3>
    <fieldset class="code"><legend>戦争終了時に値を控えておき、戦争終了時に変動値を一定以内に抑える。</legend><pre class="brush:cpp;">int 熟練値控え[532] = { 0 };
void 天翔記クラス::On_戦争終了時(int 城番号, 戦争終了パラメタ型^ パラメタ) {

  // 戦争が始まる前に戦争の熟練値を保存しておき…
  for each (auto b in 武将-&gt;配列) {
    熟練値控え[b-&gt;番号] = b-&gt;戦闘熟練;
  }
}


void 天翔記クラス::On_戦争終了時() {

  // 保存しておいた値に従って…
  for each (auto b in 武将-&gt;配列) {
    // 極端に熟練値が上がってしまった武将は、１回の戦闘で戦闘熟練+100までの上昇に抑える。
    if (b-&gt;戦闘熟練 &gt; 熟練値控え[b-&gt;番号] + 100) {
      b-&gt;戦闘熟練 = 熟練値控え[b-&gt;番号] + 100;
    }
  }

}

</pre></fieldset>
    </li>
    <li>
    <h3>その他</h3>
    <p>「On_戦争終了時」イベントハンドラについて、主な解説は以上となります。<br></p>
    </li>
</ul>

